SET-1. Write and run a TCP client and a TCP server program using ‘JAVA’ language in UNIX  / LINUX  / Windows  as per the following details:                                                                                                                  

(a)  Establish a TCP connection between a TCP client and a TCP server. 

(b)  Client program will send some messages (echo client) to the server.

(c) Server will return the messages/acknowledgement (echo server )  to the client. 


Ans: -
To perform this at first, we have to create two separate Java files on our directory one for Server and
other one for the Client with the help of ‘vim’ editor. Then we can write the code to setup TCPserver and
TCPclient locally.

TCPserver:
----------------------------------------------------

import java.io.*;
import java.net.*;
public class TCPserver {
 public static void main(String[] args) {
 try (ServerSocket serverSocket = new ServerSocket(6789)) {
 System.out.println("Server is listening on port 6789");
 while (true) {
 Socket socket = serverSocket.accept();
 System.out.println("New client connected");
 new ServerThread(socket).start();
 }
 } catch (IOException ex) {
 ex.printStackTrace();
 }
 }
}
class ServerThread extends Thread {
 private Socket socket;
 public ServerThread(Socket socket) {
 this.socket = socket;
 }
 public void run() {
 try (InputStream input = socket.getInputStream();
 BufferedReader reader = new BufferedReader(new InputStreamReader(input));
 OutputStream output = socket.getOutputStream();
 PrintWriter writer = new PrintWriter(output, true)) {
 String text;
 while ((text = reader.readLine()) != null) {
 System.out.println("Received: " + text);
 writer.println("Echo: " + text);
 }
 } catch (IOException ex) {
 ex.printStackTrace();
 }
 }
}

TCPclient:
----------------------------------------------------

import java.io.*;
import java.net.*;
public class TCPclient {
 public static void main(String[] args) {
 String hostname = "localhost";
 int port = 6789;
 try (Socket socket = new Socket(hostname, port);
 OutputStream output = socket.getOutputStream();
 PrintWriter writer = new PrintWriter(output, true);
 InputStream input = socket.getInputStream();
BufferedReader reader = new BufferedReader(new InputStreamReader(input));
 BufferedReader consoleReader = new BufferedReader(new InputStreamReader(System.in))) {
 String text;
 while (true) {
 System.out.print("Enter message: ");
 text = consoleReader.readLine();
 writer.println(text);
 String response = reader.readLine();
 System.out.println(response);
 if ("exit".equalsIgnoreCase(text)) {
 break;
 }
 }
 } catch (UnknownHostException ex) {
 System.out.println("Server not found: " + ex.getMessage());
 } catch (IOException ex) {
 System.out.println("I/O error: " + ex.getMessage());
 }
 }
}

OUTPUT:
----------------------------------------------

https://i.postimg.cc/wMTbrWbX/image.png
set-8: Write and run a TCP client and a server program using JAVA-language in Linux/Unix environment to perform the following tasks:                                                                                                                                                                                  

(a)  Establish a TCP connection between a TCP client and a TCP server. 

(b)  The client program sends two strings to the server. 

(c)   The server program returns 'YES' if both the strings are equal and `NO' if both are not equal. 


ANS:
-----------------------------

To perform this at first, we have to create two separate Java files on our directory one for Server and other one for the Client with the help of ‘vim’ editor. Then we can write the code to setup TCPserver and TCPclient locally.


TCP Server
---------------------------------------------

import java.io.*;
import java.net.*;
public class TCPserver {
 public static void main(String[] args) {
 try (ServerSocket serverSocket = new ServerSocket(6789)) {
 System.out.println("Server is listening on port 6789");
 while (true) {
 Socket socket = serverSocket.accept();
 System.out.println("New client connected");
 new ServerThread(socket).start();
 }
 } catch (IOException ex) {
 ex.printStackTrace();
 }
 }
}
class ServerThread extends Thread {
 private Socket socket;
 public ServerThread(Socket socket) {
 this.socket = socket;
 }
 public void run() {
 try (InputStream input = socket.getInputStream();
 BufferedReader reader = new BufferedReader(new InputStreamReader(input));
 OutputStream output = socket.getOutputStream();
 PrintWriter writer = new PrintWriter(output, true)) {
 String str1 = reader.readLine();
 String str2 = reader.readLine();
 System.out.println("Received: " + str1 + " and " + str2);
 if (str1 != null && str1.equals(str2)) {
 writer.println("YES");
 } else {
 writer.println("NO");
 }
 } catch (IOException ex) {
 ex.printStackTrace();
 }
 }
}


TCP Client: 
------------------------------------------------

ort java.io.*;
import java.net.*;
public class TCPclient {
 public static void main(String[] args) {
 String hostname = "localhost";
 int port = 6789;
 try (Socket socket = new Socket(hostname, port);
 OutputStream output = socket.getOutputStream();
 PrintWriter writer = new PrintWriter(output, true);
 InputStream input = socket.getInputStream();
 BufferedReader reader = new BufferedReader(new InputStreamReader(input));
 BufferedReader consoleReader = new BufferedReader(new InputStreamReader(System.in))) {
 System.out.print("Enter first string: ");
 String str1 = consoleReader.readLine();
 System.out.print("Enter second string: ");
 String str2 = consoleReader.readLine();
 writer.println(str1);
 writer.println(str2);
 String response = reader.readLine();
 System.out.println("Server response: " + response);
 } catch (UnknownHostException ex) {
 System.out.println("Server not found: " + ex.getMessage());
 } catch (IOException ex) {
 System.out.println("I/O error: " + ex.getMessage());
 }
 }

}


OUTPUT:
---------------------------------------------------------

https://i.postimg.cc/VvZQt21S/image.png